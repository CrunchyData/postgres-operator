# Instructions on how to use this file:
#
# This is a double-curly brace, "handlebars", style of templating file. When you
# want to update a release tag, set the values in `release_tags:` below and they'll
# be used by hack/update-release-parameters.sh to replace handlebars in template
# files located in hack/release-templates.
#
# To add new handlebars, you can reuse the values in release_tags and update
# the templates, or you can create new release_tags. In either case, you'll
# need to list the release_tag key in the replacements array for the respective
# update.
#
# For example, after adding a new handlebar to hack/release-templates/github-ISSUE_TEMPLATE-bug-report.md
# e.g. blah_version:
#  updates:
#  - targetFile: .github/ISSUE_TEMPLATE/bug_report.md
#    template: hack/release-templates/github-ISSUE_TEMPLATE-bug-report.md
#    replacements:
#    - ubi8_pgo_latest_image_tag
#    - blah_version
#
# Note that the targetFile refers to the "real" file and "template" refers to
# the document where you'll place handlebars to make new replacements possible.

---
release_tags:
  # Versions
  pgmonitor_version: v4.8.0
  pgo_latest_version: 5.3.0
  postgres_15_version: 15.1
  postgres_14_version: 14.6
  postgres_13_version: 13.9
  postgres_12_version: 12.13
  postgres_11_version: 11.18
  postgres_exporter_version: 0.10.1
  k8s_version_range: 1.22-1.25
  oc_version_range: 4.8-4.11

  # Image tags
  ubi8_pgbackrest_tag: ubi8-2.41-2
  ubi8_pgbouncer_tag: ubi8-1.17-5
  ubi8_pgbouncer_component_tag: ubi8-1.17-1
  ubi8_pgadmin4_tag: ubi8-4.30-8
  ubi8_pgupgrade_tag: ubi8-5.3.0-0
  ubi8_postgres_exporter_tag: ubi8-5.3.0-0
  ubi8_postgres_15_tag: ubi8-15.1-0
  ubi8_postgres_14_tag: ubi8-14.6-2
  ubi8_postgres_14_component_tag: ubi8-14.6-3.1-2
  ubi8_postgres_13_tag: ubi8-13.9-2
  ubi8_postgres_gis_14_32_tag: ubi8-14.6-3.2-5.3.0-0
  ubi8_postgres_gis_14_31_tag: ubi8-14.6-3.1-5.3.0-0
  ubi8_postgres_gis_component_15_33_tag: ubi8-15.1-3.3-0
  ubi8_postgres_gis_component_14_33_tag: ubi8-14.6-3.3-2
  ubi8_postgres_gis_component_14_32_tag: ubi8-14.6-3.2-2
  ubi8_postgres_gis_component_14_31_tag: ubi8-14.6-3.1-2
  ubi8_postgres_gis_component_13_31_tag: ubi8-13.9-3.1-2
  ubi8_postgres_gis_component_13_30_tag: ubi8-13.9-3.0-2
  ubi8_pgo_latest_image_tag: ubi8-5.3.0-0

updates:
- targetFile: .github/ISSUE_TEMPLATE/bug_report.md
  template: hack/release-templates/github-ISSUE_TEMPLATE-bug-report.md
  replacements:
  - ubi8_pgo_latest_image_tag

- targetFile: .github/ISSUE_TEMPLATE/feature_request.md
  template: hack/release-templates/github-ISSUE_TEMPLATE-feature-request.md
  replacements:
  - ubi8_pgo_latest_image_tag

- targetFile: Makefile
  template: hack/release-templates/Makefile
  replacements:
  - postgres_14_version
  - pgmonitor_version
  - postgres_exporter_version

- targetFile: README.md
  template: hack/release-templates/README.md
  replacements:
  - k8s_version_range
  - oc_version_range

- targetFile: docs/content/_index.md
  template: hack/release-templates/docs-content-index.md
  replacements:
  - k8s_version_range
  - oc_version_range

- targetFile: docs/content/references/components.md
  template: hack/release-templates/docs-content-references-components.md
  replacements:
  - k8s_version_range
  - oc_version_range

- targetFile: build/crd/pgupgrades/kustomization.yaml
  template: hack/release-templates/build-crd-pgupgrades-kustomization.yaml
  replacements:
  - pgo_latest_version

- targetFile: build/crd/postgresclusters/kustomization.yaml
  template: hack/release-templates/build-crd-postgresclusters-kustomization.yaml
  replacements:
  - pgo_latest_version

- targetFile: config/default/kustomization.yaml
  template: hack/release-templates/config-default-kustomization.yaml
  replacements:
  - ubi8_pgo_latest_image_tag

- targetFile: config/manager/manager.yaml
  template: hack/release-templates/config-manager-manager.yaml
  replacements:
  - ubi8_postgres_13_tag
  - ubi8_postgres_gis_component_13_30_tag
  - ubi8_postgres_gis_component_13_31_tag
  - ubi8_postgres_14_tag
  - ubi8_postgres_gis_component_14_31_tag
  - ubi8_postgres_gis_component_14_32_tag
  - ubi8_postgres_gis_component_14_33_tag
  - ubi8_postgres_15_tag
  - ubi8_postgres_gis_component_15_33_tag
  - ubi8_pgadmin4_tag
  - ubi8_pgbackrest_tag
  - ubi8_pgbouncer_tag
  - ubi8_postgres_exporter_tag
  - ubi8_pgupgrade_tag

- targetFile: config/singlenamespace/kustomization.yaml
  template: hack/release-templates/config-singlenamespace-kustomization.yaml
  replacements:
  - ubi8_pgo_latest_image_tag

- targetFile: docs/config.toml
  template: hack/release-templates/docs-config.toml
  replacements:
  - pgo_latest_version
  - ubi8_postgres_14_tag
  - ubi8_pgbackrest_tag
  - ubi8_pgbouncer_tag
  - ubi8_postgres_exporter_tag
  - ubi8_pgadmin4_tag
  - ubi8_pgupgrade_tag
  - ubi8_pgo_latest_image_tag
  - ubi8_pgbouncer_component_tag
  - ubi8_postgres_gis_component_14_32_tag
  - ubi8_postgres_gis_14_32_tag
  - ubi8_postgres_gis_component_14_31_tag
  - ubi8_postgres_gis_14_31_tag
  - postgres_15_version
  - postgres_14_version
  - postgres_13_version
  - postgres_12_version
  - postgres_11_version
