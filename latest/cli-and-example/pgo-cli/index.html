<!DOCTYPE html>
<html>
  <head>
    <title>Crunchy Data PostgreSQL Operator Documentation</title>
    
      <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="generator" content="Hugo 0.52" />
<title>PGO CLI :: Crunchy Data PostgreSQL Operator Documentation</title>
<link rel="shortcut icon" href="https://crunchydata.github.io/postgres-operator/latest/favicon.png" type="image/x-icon" />
<link href="https://crunchydata.github.io/postgres-operator/latest/css/nucleus.css" rel="stylesheet">
<link href="https://crunchydata.github.io/postgres-operator/latest/theme-flex/style.css" rel="stylesheet">

<link rel="stylesheet" href="https://crunchydata.github.io/postgres-operator/latest/css/bootstrap.min.css">
<link href="https://crunchydata.github.io/postgres-operator/latest/css/custom.css" rel="stylesheet">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css" integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous">
<script src="https://crunchydata.github.io/postgres-operator/latest/js/jquery-2.x.min.js"></script>
<script src="https://crunchydata.github.io/postgres-operator/latest/js/toc.js"></script>
<script type="text/javascript">
      var baseurl = "https:\/\/crunchydata.github.io\/postgres-operator\/latest\/";
</script>
<meta name="description" content="">



    
  </head>
  <body data-url="/cli-and-example/pgo-cli/">
    
      <header>
  <div class="logo">
    
	
  
    <img alt="Crunchy Data" src="https://crunchydata.github.io/postgres-operator/latest/images/logo.svg">
  


  </div>
  <div class="burger"><a href="javascript:void(0);" style="font-size:15px;">&#9776;</a></div>
    <nav class="shortcuts">
            <li class="" role="">
                <a href="https://github.com/CrunchyData/postgres-operator"  rel="noopener">
                  <i class='fab fa-github'></i> <label>Source</label>
                </a>
            </li>
            <li class="" role="">
                <a href="https://kubernetes.io/docs/"  rel="noopener">
                  <i class='fas fa-bookmark'></i> <label>Kubernetes</label>
                </a>
            </li>
            <li class="" role="">
                <a href="https://github.com/CrunchyData/postgres-operator/blob/master/LICENSE.md"  rel="noopener">
                  <i class='fas fa-file-contract'></i> <label>License</label>
                </a>
            </li>
    </nav>
</header>
<article>
  <aside>

    <ul class="menu">
      <div>
        <div class="searchbox">
          <input data-search-input id="search-by" type="text" placeholder="">
        </div>
        <script type="text/javascript" src="https://crunchydata.github.io/postgres-operator/latest/js/lunr.min.js"></script>
        <script type="text/javascript" src="https://crunchydata.github.io/postgres-operator/latest/js/auto-complete.js"></script>
        <link href="https://crunchydata.github.io/postgres-operator/latest/css/auto-complete.css" rel="stylesheet">
        <script type="text/javascript">
          
              var baseurl = "https:\/\/crunchydata.github.io\/postgres-operator\/latest\/";
          
        </script>
        <script type="text/javascript" src="https://crunchydata.github.io/postgres-operator/latest/js/search.js"></script>
      </div>

      <hr>
      <a class="baselink" href="https://crunchydata.github.io/postgres-operator/latest/">Crunchy Data PostgreSQL Operator Documentation</a>
      <hr>

      

      <b>Navigation</b>
    <li data-nav-id="/installation/" class="dd-item haschildren
        ">
      <div>
      <a href="https://crunchydata.github.io/postgres-operator/latest/installation/">Installation</a><i class="fas fa-angle-right fa-lg category-icon"></i>

      </div>
        <ul>
      <li data-nav-id="/installation/installation/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/latest/installation/installation/">
            Operator Installation
          </a>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/configuration/" class="dd-item haschildren
        ">
      <div>
      <a href="https://crunchydata.github.io/postgres-operator/latest/configuration/">Configuration</a><i class="fas fa-angle-right fa-lg category-icon"></i>

      </div>
        <ul>
      <li data-nav-id="/configuration/configuration/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/latest/configuration/configuration/">
            Configuration Resources
          </a>
        </div>
    </li>
      <li data-nav-id="/configuration/pgo-yaml-configuration/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/latest/configuration/pgo-yaml-configuration/">
            PGO YAML
          </a>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/cli-and-example/" class="dd-item parent haschildren
        ">
      <div>
      <a href="https://crunchydata.github.io/postgres-operator/latest/cli-and-example/">CLI and Examples</a>
            <i class="fas fa-angle-down fa-lg category-icon"></i>

      </div>
        <ul>
      <li data-nav-id="/cli-and-example/pgo-cli/" class="dd-item active">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/latest/cli-and-example/pgo-cli/">
            PGO CLI
          </a>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/design/" class="dd-item haschildren
        ">
      <div>
      <a href="https://crunchydata.github.io/postgres-operator/latest/design/">Design</a><i class="fas fa-angle-right fa-lg category-icon"></i>

      </div>
        <ul>
      <li data-nav-id="/design/design/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/latest/design/design/">
            Key Features
          </a>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/developer-setup/" class="dd-item haschildren
        ">
      <div>
      <a href="https://crunchydata.github.io/postgres-operator/latest/developer-setup/">Developer Setup</a><i class="fas fa-angle-right fa-lg category-icon"></i>

      </div>
        <ul>
      <li data-nav-id="/developer-setup/developing/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/latest/developer-setup/developing/">
            Develop
          </a>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/security/" class="dd-item haschildren
        ">
      <div>
      <a href="https://crunchydata.github.io/postgres-operator/latest/security/">Security</a><i class="fas fa-angle-right fa-lg category-icon"></i>

      </div>
        <ul>
      <li data-nav-id="/security/security/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/latest/security/security/">
            Security
          </a>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/upgrade/" class="dd-item haschildren
        ">
      <div>
      <a href="https://crunchydata.github.io/postgres-operator/latest/upgrade/">Upgrade</a><i class="fas fa-angle-right fa-lg category-icon"></i>

      </div>
        <ul>
      <li data-nav-id="/upgrade/upgrading/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/latest/upgrade/upgrading/">
            Upgrading
          </a>
        </div>
    </li>
        </ul>
    </li>




      <hr><b>Table of Contents</b>
<nav id="TableOfContents"></nav>

      <hr>
      <b>Available Formats</b>
      <nav class="downloads">
              <li class="" role="">
                  <a href="https://crunchydata.github.io/postgres-operator/latest/pdf/postgres-operator.pdf"  rel="noopener">
                    <i class='fas fa-file-pdf'></i> <label>PDF</label>
                  </a>
              </li>
      </nav>
      <hr>


      <section>
      </section>
    </ul>
  </aside>
  <section class="page">

    <div class="nav-select">
      <center>Navigation :
        <select onchange="javascript:location.href = this.value;">
          
    <option value="/installation/" >
   Installation</option>
    <option value="/configuration/" >
   Configuration</option>
    <option value="/cli-and-example/" >
   CLI and Examples</option> 
      <option value="/cli-and-example/pgo-cli/"  selected>- PGO CLI</option>
  
    <option value="/design/" >
   Design</option>
    <option value="/developer-setup/" >
   Developer Setup</option>
    <option value="/security/" >
   Security</option>
    <option value="/upgrade/" >
   Upgrade</option>



        </select>
      </center>
    </div>

    
      <div id="top-bar">
        
          
          
          
        <div id="top-github-link">
          <a class="github-link" href="https://crunchydata.github.io/postgres-operator/latest/contributing/" target="blank">
            <i class="fa fa-info-circle"></i>
            
          </a>
          <a class="github-link" href="https://github.com/CrunchyData/postgres-operator/edit/develop/hugo/content/CLI%20and%20Example/pgo-cli.md" target="blank">
            <i class="fa fa-code-fork"></i>
            
          </a>
        </div><div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
            <span id="sidebar-toggle-span">
              <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                <i class="fa fa-bars"></i>
              </a>
            </span>
            <span id="toc-menu"><i class="fa fa-list-alt"></i></span>
            <span class="links">
            







 <a href='https://crunchydata.github.io/postgres-operator/latest/'>Crunchy Data Postgres Operator</a> > <a href='https://crunchydata.github.io/postgres-operator/latest/cli-and-example/'>CLI and Examples</a> > PGO CLI

 

 


            </span>
        </div>

      </div>
    

    
    <div id="body-inner">

    <h1>PGO CLI</h1>

    
    
    
    

<p>The command line tool, pgo, is used to interact with the Postgres Operator.</p>

<p>Most users will work with the Operator using the <em>pgo</em> CLI tool.  That tool is downloaded from the Github Releases page for the Operator (<a href="https://github.com/crunchydata/postgres-operator/releases">https://github.com/crunchydata/postgres-operator/releases</a>).</p>

<p>The <em>pgo</em> client is provided in Mac, Windows, and Linux binary formats, download the appropriate client to your local laptop or workstation to work with a remote Operator.</p>

<h2 id="syntax">Syntax</h2>

<p>Use the following syntax to run  <code>pgo</code>  commands from your terminal window:</p>

<pre><code>pgo [command] ([TYPE] [NAME]) [flags]
</code></pre>

<p>Where <em>command</em> is a verb like:
 - show
 - get
 - create
 - delete</p>

<p>And <em>type</em> is a resource type like:
 - cluster
 - policy
 - user</p>

<p>And <em>name</em> is the name of the resource type like:
 - mycluster
 - somesqlpolicy
 - john</p>

<h2 id="operations">Operations</h2>

<p>The following table shows the <em>pgo</em> operations currently implemented:</p>

<table>
<thead>
<tr>
<th align="left">Operation</th>
<th align="left">Syntax</th>
<th align="left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td align="left">apply</td>
<td align="left"><code>pgo apply mypolicy  --selector=name=mycluster</code></td>
<td align="left">Apply a SQL policy on a Postgres cluster(s)</td>
</tr>

<tr>
<td align="left">backup</td>
<td align="left"><code>pgo backup mycluster</code></td>
<td align="left">Perform a backup on a Postgres cluster(s)</td>
</tr>

<tr>
<td align="left">create</td>
<td align="left">pgo create cluster mycluster</td>
<td align="left">Create an Operator resource type (e.g. cluster, policy, user)</td>
</tr>

<tr>
<td align="left">delete</td>
<td align="left">pgo delete cluster mycluster</td>
<td align="left">Delete an Operator resource type (e.g. cluster, policy, user)</td>
</tr>

<tr>
<td align="left">df</td>
<td align="left">pgo df mycluster</td>
<td align="left">Display the disk status/capacity of a Postgres cluster.</td>
</tr>

<tr>
<td align="left">failover</td>
<td align="left">pgo failover mycluster</td>
<td align="left">Perform a manual failover of a Postgres cluster.</td>
</tr>

<tr>
<td align="left">help</td>
<td align="left">pgo help</td>
<td align="left">Display general <em>pgo</em> help information.</td>
</tr>

<tr>
<td align="left">label</td>
<td align="left">pgo label mycluster &ndash;label=environment=prod</td>
<td align="left">Create a metadata label for a Postgres cluster(s).</td>
</tr>

<tr>
<td align="left">load</td>
<td align="left">pgo load &ndash;load-config=load.json &ndash;selector=name=mycluster</td>
<td align="left">Perform a data load into a Postgres cluster(s).</td>
</tr>

<tr>
<td align="left">reload</td>
<td align="left">pgo reload mycluster</td>
<td align="left">Perform a pg_ctl reload command on a Postgres cluster(s).</td>
</tr>

<tr>
<td align="left">restore</td>
<td align="left">pgo restore mycluster &ndash;to-pvc=restored</td>
<td align="left">Perform a pgbackrest restore on a Postgres cluster.</td>
</tr>

<tr>
<td align="left">scale</td>
<td align="left">pgo scale mycluster</td>
<td align="left">Create a Postgres replica(s) for a given Postgres cluster.</td>
</tr>

<tr>
<td align="left">scaledown</td>
<td align="left">pgo scaledown  mycluster &ndash;query</td>
<td align="left">Delete a replica from a Postgres cluster.</td>
</tr>

<tr>
<td align="left">show</td>
<td align="left">pgo show cluster mycluster</td>
<td align="left">Display Operator resource information (e.g. cluster, user, policy).</td>
</tr>

<tr>
<td align="left">status</td>
<td align="left">pgo status</td>
<td align="left">Display Operator status.</td>
</tr>

<tr>
<td align="left">test</td>
<td align="left">pgo test mycluster</td>
<td align="left">Perform a SQL test on a Postgres cluster(s).</td>
</tr>

<tr>
<td align="left">update</td>
<td align="left">pgo update cluster &ndash;label=autofail=false</td>
<td align="left">Update a Postgres cluster(s).</td>
</tr>

<tr>
<td align="left">upgrade</td>
<td align="left">pgo upgrade mycluster</td>
<td align="left">Perform a minor upgrade to a Postgres cluster(s).</td>
</tr>

<tr>
<td align="left">user</td>
<td align="left">pgo user &ndash;selector=name=mycluster &ndash;update-passwords</td>
<td align="left">Perform Postgres user maintenance on a Postgres cluster(s).</td>
</tr>

<tr>
<td align="left">version</td>
<td align="left">pgo version</td>
<td align="left">Display Operator version information.</td>
</tr>
</tbody>
</table>

<h2 id="common-operations">Common Operations</h2>

<h3 id="cluster-operations">Cluster Operations</h3>

<h4 id="create-cluster-with-a-primary-only">Create Cluster With a Primary Only</h4>

<pre><code>pgo create cluster mycluster
</code></pre>

<h4 id="create-cluster-with-a-primary-and-a-replica">Create Cluster With a Primary and a Replica</h4>

<pre><code>pgo create cluster mycluster --replica-count=1
</code></pre>

<h4 id="scale-a-cluster-with-additional-replicas">Scale a Cluster with Additional Replicas</h4>

<pre><code>pgo scale cluster mycluster
</code></pre>

<h4 id="create-a-cluster-with-pgbackrest-configured">Create a Cluster with pgbackrest Configured</h4>

<pre><code>pgo create cluster mycluster --pgbackrest
</code></pre>

<h4 id="scaledown-a-cluster">Scaledown a Cluster</h4>

<pre><code>pgo scaledown cluster mycluster --query
pgo scaledown cluster mycluster --target=sometarget
</code></pre>

<h4 id="delete-a-cluster">Delete a Cluster</h4>

<pre><code>pgo delete cluster mycluster
</code></pre>

<h4 id="delete-a-cluster-and-it-s-data">Delete a Cluster and It&rsquo;s Data</h4>

<pre><code>pgo delete cluster mycluster --delete-data
</code></pre>

<h4 id="test-a-cluster">Test a Cluster</h4>

<pre><code>pgo test mycluster
</code></pre>

<h4 id="view-disk-utilization">View Disk Utilization</h4>

<pre><code>pgo df mycluster
</code></pre>

<h3 id="label-operations">Label Operations</h3>

<h4 id="apply-a-label-to-a-cluster">Apply a Label to a Cluster</h4>

<pre><code>pgo label mycluster --label=environment=prod
</code></pre>

<h4 id="appy-a-label-to-a-set-of-clusters">Appy a Label to a Set of Clusters</h4>

<pre><code>pgo label --selector=clustertypes=research --label=environment=prod
</code></pre>

<h4 id="show-clusters-by-label">Show Clusters by Label</h4>

<pre><code>pgo show cluster --selector=environment=prod
</code></pre>

<h3 id="policy-operations">Policy Operations</h3>

<h4 id="create-a-policy">Create a Policy</h4>

<pre><code>pgo create policy mypolicy --in-file=mypolicy.sql
</code></pre>

<h4 id="view-policies">View Policies</h4>

<pre><code>pgo show policy all
</code></pre>

<h4 id="apply-a-policy">Apply a Policy</h4>

<pre><code>pgo apply mypolicy --selector=environment=prod
pgo apply mypolicy --selector=name=mycluster
</code></pre>

<h3 id="operator-status">Operator Status</h3>

<h4 id="show-operator-version">Show Operator Version</h4>

<pre><code>pgo version
</code></pre>

<h4 id="show-operator-status">Show Operator Status</h4>

<pre><code>pgo status
</code></pre>

<h4 id="show-operator-configuration">Show Operator Configuration</h4>

<pre><code>pgo show config
</code></pre>

<h3 id="backup-and-restore">Backup and Restore</h3>

<h4 id="perform-a-pgbasebackup">Perform a pgbasebackup</h4>

<pre><code>pgo backup mycluster
</code></pre>

<h4 id="perform-a-pgbackrest-backup">Perform a pgbackrest backup</h4>

<pre><code>pgo backup mycluster --backup-type=pgbackrest
</code></pre>

<h4 id="perform-a-pgbackrest-restore">Perform a pgbackrest restore</h4>

<pre><code>pgo restore mycluster --to-pvc=restoredname
pgo create restoredname --pgbackrest --pgbackrest-restore-from=mycluster
</code></pre>

<h4 id="restore-from-pgbasebackup">Restore from pgbasebackup</h4>

<pre><code>pgo create cluster restoredcluster --backup-path=/somebackup/path --backup-pvc=somebackuppvc
</code></pre>

<h3 id="fail-over-operations">Fail-over Operations</h3>

<h4 id="perform-a-manual-fail-over">Perform a Manual Fail-over</h4>

<pre><code>pgo failover mycluster --query
pgo failover mycluster --target=sometarget
</code></pre>

<h4 id="create-a-cluster-with-auto-fail-enabled">Create a Cluster with Auto-fail Enabled</h4>

<pre><code>pgo create cluster mycluster --autofail
</code></pre>

<h3 id="add-on-operations">Add-On Operations</h3>

<h4 id="create-a-cluster-with-pgbouncer">Create a Cluster with pgbouncer</h4>

<pre><code>pgo create cluster mycluster --pgbouncer
</code></pre>

<h4 id="create-a-cluster-with-pgpool">Create a Cluster with pgpool</h4>

<pre><code>pgo create cluster mycluster --pgpool
</code></pre>

<h4 id="add-pgbouncer-to-a-cluster">Add pgbouncer to a Cluster</h4>

<pre><code>pgo create pgbouncer mycluster
</code></pre>

<h4 id="add-pgpool-to-a-cluster">Add pgpool to a Cluster</h4>

<pre><code>pgo create pgpool mycluster
</code></pre>

<h4 id="remove-pgbouncer-from-a-cluster">Remove pgbouncer from a Cluster</h4>

<pre><code>pgo delete pgbouncer mycluster
</code></pre>

<h4 id="remove-pgpool-from-a-cluster">Remove pgpool from a Cluster</h4>

<pre><code>pgo delete pgpool mycluster
</code></pre>

<h4 id="create-a-cluster-with-pgbadger">Create a Cluster with pgbadger</h4>

<pre><code>pgo create cluster mycluster --pgbadger
</code></pre>

<h4 id="create-a-cluster-with-metrics-collection">Create a Cluster with Metrics Collection</h4>

<pre><code>pgo create cluster mycluster --metrics
</code></pre>

<h3 id="complex-deployments">Complex Deployments</h3>

<h4 id="create-a-cluster-using-specific-storage">Create a Cluster using Specific Storage</h4>

<pre><code>pgo create cluster mycluster --storage-config=somestorageconfig
</code></pre>

<h4 id="create-a-cluster-using-a-preferred-node">Create a Cluster using a Preferred Node</h4>

<pre><code>pgo create cluster mycluster --node-label=speed=superfast
</code></pre>

<h4 id="create-a-replica-using-specific-storage">Create a Replica using Specific Storage</h4>

<pre><code>pgo scale mycluster --storage-config=someslowerstorage
</code></pre>

<h4 id="create-a-replica-using-a-preferred-node">Create a Replica using a Preferred Node</h4>

<pre><code>pgo scale mycluster --node-label=speed=slowerthannormal
</code></pre>

<h4 id="create-a-cluster-with-loadbalancer-servicetype">Create a Cluster with LoadBalancer ServiceType</h4>

<pre><code>pgo create cluster mycluster --service-type=LoadBalancer
</code></pre>

<h2 id="flags">Flags</h2>

<p><em>pgo</em> command flags include:</p>

<table>
<thead>
<tr>
<th align="left">Flag</th>
<th align="left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td align="left">apiserver-url</td>
<td align="left">URL of the Operator REST API service, override with CO_APISERVER_URL environment variable</td>
</tr>

<tr>
<td align="left">debug</td>
<td align="left">enable debug messages</td>
</tr>

<tr>
<td align="left">pgo-ca-cert</td>
<td align="left">The CA Certificate file path for authenticating to the PostgreSQL Operator apiserver. Override with PGO_CA_CERT environment variable</td>
</tr>

<tr>
<td align="left">pgo-client-cert</td>
<td align="left">The Client Certificate file path for authenticating to the PostgreSQL Operator apiserver.  Override with PGO_CLIENT_CERT environment variable</td>
</tr>

<tr>
<td align="left">pgo-client-key</td>
<td align="left">The Client Key file path for authenticating to the PostgreSQL Operator apiserver.  Override with PGO_CLIENT_KEY environment variable</td>
</tr>
</tbody>
</table>


    
    
        <div class="chevrons">
    <div id="navigation">
<a class="nav nav-prev" href="https://crunchydata.github.io/postgres-operator/latest/cli-and-example/" title="CLI and Examples"> <i class="fa fa-chevron-left"></i><label>CLI and Examples</label></a>
    <a class="nav nav-next" href="https://crunchydata.github.io/postgres-operator/latest/design/" title="Design" style="margin-right: 0px;"><label>Design</label><i class="fa fa-chevron-right"></i></a></div>
  </div>

  </section>
</article>

<footer>

<div class="footline">
    

    

  

  </div>


	<div>


  



	</div>
</footer>

<link href="https://crunchydata.github.io/postgres-operator/latest/css/featherlight.min.css" rel="stylesheet">
<script src="https://crunchydata.github.io/postgres-operator/latest/js/featherlight.min.js"></script>



<script src="https://crunchydata.github.io/postgres-operator/latest/theme-flex/script.js"></script>


    

    
    

    
  </body>
</html>