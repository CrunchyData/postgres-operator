<!DOCTYPE html>
<html>
  <head>
    <title>Crunchy Data PostgreSQL Operator Documentation</title>
    
      <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="generator" content="Hugo 0.52" />
<title>Develop :: Crunchy Data PostgreSQL Operator Documentation</title>
<link rel="shortcut icon" href="https://crunchydata.github.io/postgres-operator/latest/favicon.png" type="image/x-icon" />
<link href="https://crunchydata.github.io/postgres-operator/latest/css/nucleus.css" rel="stylesheet">
<link href="https://crunchydata.github.io/postgres-operator/latest/theme-flex/style.css" rel="stylesheet">

<link rel="stylesheet" href="https://crunchydata.github.io/postgres-operator/latest/css/bootstrap.min.css">
<link href="https://crunchydata.github.io/postgres-operator/latest/css/custom.css" rel="stylesheet">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css" integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous">
<script src="https://crunchydata.github.io/postgres-operator/latest/js/jquery-2.x.min.js"></script>
<script src="https://crunchydata.github.io/postgres-operator/latest/js/toc.js"></script>
<script type="text/javascript">
      var baseurl = "https:\/\/crunchydata.github.io\/postgres-operator\/latest\/";
</script>
<meta name="description" content="">



    
  </head>
  <body data-url="/developer-setup/developing/">
    
      <header>
  <div class="logo">
    
	
  
    <img alt="Crunchy Data" src="https://crunchydata.github.io/postgres-operator/latest/images/logo.svg">
  


  </div>
  <div class="burger"><a href="javascript:void(0);" style="font-size:15px;">&#9776;</a></div>
    <nav class="shortcuts">
            <li class="" role="">
                <a href="https://github.com/CrunchyData/postgres-operator"  rel="noopener">
                  <i class='fab fa-github'></i> <label>Source</label>
                </a>
            </li>
            <li class="" role="">
                <a href="https://kubernetes.io/docs/"  rel="noopener">
                  <i class='fas fa-bookmark'></i> <label>Kubernetes</label>
                </a>
            </li>
            <li class="" role="">
                <a href="https://github.com/CrunchyData/postgres-operator/blob/master/LICENSE.md"  rel="noopener">
                  <i class='fas fa-file-contract'></i> <label>License</label>
                </a>
            </li>
    </nav>
</header>
<article>
  <aside>

    <ul class="menu">
      <div>
        <div class="searchbox">
          <input data-search-input id="search-by" type="text" placeholder="">
        </div>
        <script type="text/javascript" src="https://crunchydata.github.io/postgres-operator/latest/js/lunr.min.js"></script>
        <script type="text/javascript" src="https://crunchydata.github.io/postgres-operator/latest/js/auto-complete.js"></script>
        <link href="https://crunchydata.github.io/postgres-operator/latest/css/auto-complete.css" rel="stylesheet">
        <script type="text/javascript">
          
              var baseurl = "https:\/\/crunchydata.github.io\/postgres-operator\/latest\/";
          
        </script>
        <script type="text/javascript" src="https://crunchydata.github.io/postgres-operator/latest/js/search.js"></script>
      </div>

      <hr>
      <a class="baselink" href="https://crunchydata.github.io/postgres-operator/latest/">Crunchy Data PostgreSQL Operator Documentation</a>
      <hr>

      

      <b>Navigation</b>
    <li data-nav-id="/installation/" class="dd-item haschildren
        ">
      <div>
      <a href="https://crunchydata.github.io/postgres-operator/latest/installation/">Installation</a><i class="fas fa-angle-right fa-lg category-icon"></i>

      </div>
        <ul>
      <li data-nav-id="/installation/installation/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/latest/installation/installation/">
            Operator Installation
          </a>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/configuration/" class="dd-item haschildren
        ">
      <div>
      <a href="https://crunchydata.github.io/postgres-operator/latest/configuration/">Configuration</a><i class="fas fa-angle-right fa-lg category-icon"></i>

      </div>
        <ul>
      <li data-nav-id="/configuration/configuration/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/latest/configuration/configuration/">
            Configuration Resources
          </a>
        </div>
    </li>
      <li data-nav-id="/configuration/pgo-yaml-configuration/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/latest/configuration/pgo-yaml-configuration/">
            PGO YAML
          </a>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/cli-and-example/" class="dd-item haschildren
        ">
      <div>
      <a href="https://crunchydata.github.io/postgres-operator/latest/cli-and-example/">CLI and Examples</a><i class="fas fa-angle-right fa-lg category-icon"></i>

      </div>
        <ul>
      <li data-nav-id="/cli-and-example/pgo-cli/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/latest/cli-and-example/pgo-cli/">
            PGO CLI
          </a>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/design/" class="dd-item haschildren
        ">
      <div>
      <a href="https://crunchydata.github.io/postgres-operator/latest/design/">Design</a><i class="fas fa-angle-right fa-lg category-icon"></i>

      </div>
        <ul>
      <li data-nav-id="/design/design/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/latest/design/design/">
            Key Features
          </a>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/developer-setup/" class="dd-item parent haschildren
        ">
      <div>
      <a href="https://crunchydata.github.io/postgres-operator/latest/developer-setup/">Developer Setup</a>
            <i class="fas fa-angle-down fa-lg category-icon"></i>

      </div>
        <ul>
      <li data-nav-id="/developer-setup/developing/" class="dd-item active">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/latest/developer-setup/developing/">
            Develop
          </a>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/security/" class="dd-item haschildren
        ">
      <div>
      <a href="https://crunchydata.github.io/postgres-operator/latest/security/">Security</a><i class="fas fa-angle-right fa-lg category-icon"></i>

      </div>
        <ul>
      <li data-nav-id="/security/security/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/latest/security/security/">
            Security
          </a>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/upgrade/" class="dd-item haschildren
        ">
      <div>
      <a href="https://crunchydata.github.io/postgres-operator/latest/upgrade/">Upgrade</a><i class="fas fa-angle-right fa-lg category-icon"></i>

      </div>
        <ul>
      <li data-nav-id="/upgrade/upgrading/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/latest/upgrade/upgrading/">
            Upgrading
          </a>
        </div>
    </li>
        </ul>
    </li>




      <hr><b>Table of Contents</b>
<nav id="TableOfContents"></nav>

      <hr>
      <b>Available Formats</b>
      <nav class="downloads">
              <li class="" role="">
                  <a href="https://crunchydata.github.io/postgres-operator/latest/pdf/postgres-operator.pdf"  rel="noopener">
                    <i class='fas fa-file-pdf'></i> <label>PDF</label>
                  </a>
              </li>
      </nav>
      <hr>


      <section>
      </section>
    </ul>
  </aside>
  <section class="page">

    <div class="nav-select">
      <center>Navigation :
        <select onchange="javascript:location.href = this.value;">
          
    <option value="/installation/" >
   Installation</option>
    <option value="/configuration/" >
   Configuration</option>
    <option value="/cli-and-example/" >
   CLI and Examples</option>
    <option value="/design/" >
   Design</option>
    <option value="/developer-setup/" >
   Developer Setup</option> 
      <option value="/developer-setup/developing/"  selected>- Develop</option>
  
    <option value="/security/" >
   Security</option>
    <option value="/upgrade/" >
   Upgrade</option>



        </select>
      </center>
    </div>

    
      <div id="top-bar">
        
          
          
          
        <div id="top-github-link">
          <a class="github-link" href="https://crunchydata.github.io/postgres-operator/latest/contributing/" target="blank">
            <i class="fa fa-info-circle"></i>
            
          </a>
          <a class="github-link" href="https://github.com/CrunchyData/postgres-operator/edit/develop/hugo/content/Developer%20Setup/developing.md" target="blank">
            <i class="fa fa-code-fork"></i>
            
          </a>
        </div><div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
            <span id="sidebar-toggle-span">
              <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                <i class="fa fa-bars"></i>
              </a>
            </span>
            <span id="toc-menu"><i class="fa fa-list-alt"></i></span>
            <span class="links">
            







 <a href='https://crunchydata.github.io/postgres-operator/latest/'>Crunchy Data Postgres Operator</a> > <a href='https://crunchydata.github.io/postgres-operator/latest/developer-setup/'>Developer Setup</a> > Develop

 

 


            </span>
        </div>

      </div>
    

    
    <div id="body-inner">

    <h1>Develop</h1>

    
    
    
    

<h1 id="developing">Developing</h1>

<p>The Operator is an open source project hosted on github (<a href="https://github.com/crunchydata/postgres-operator">https://github.com/crunchydata/postgres-operator</a>)</p>

<p>Developers that wish to build the Operator from source or contribute to the project via pull requests would set up a development environment as follows:</p>

<h2 id="create-kubernetes-cluster">Create Kubernetes Cluster</h2>

<p>We use either Openshift Container Platform or kubeadm to install our development clusters,  we currently develop and test on CentOS and RHEL hosts.  Each of those installation methods are documented on the respective project&rsquo;s sites.</p>

<h2 id="create-a-local-development-host">Create a Local Development Host</h2>

<p>We currently build on RHEL variants like CentoOS or RHEL, but others are possible but we don&rsquo;t support other Linux variants currently.</p>

<h2 id="perform-manual-install">Perform Manual Install</h2>

<p>You can follow the manual installation method described in this documentation to make sure you can deploy from your local development host to your Kubernetes cluster.</p>

<h2 id="build-locally">Build Locally</h2>

<p>You can now build from source the Operator locally on your development host.  Here are some steps to follow:</p>

<h3 id="get-build-dependencies">Get Build Dependencies</h3>

<pre><code>make setup
</code></pre>

<p>That target should install a golang compiler, and any other build dependencies.</p>

<h3 id="compile">Compile</h3>

<p>You can build all the Operator binaries and Docker images by running:</p>

<pre><code>make all
</code></pre>

<p>This assumes you have Docker installed and running on your development host.</p>

<p>The project uses the golang dep package manager to vendor all the golang source dependencies into the <em>vendor</em> directory.  You typically don&rsquo;t need to run any <em>dep</em> commands unless you are adding new golang package dependencies into the project outside of what is within the project for a given release.</p>

<p>After a full compile, you will have a <em>pgo</em> binary in $HOME/odev/bin and the Operator images in your local Docker registry.</p>

<h3 id="release">Release</h3>

<p>You can perform a release build by running:</p>

<pre><code>make release
</code></pre>

<p>This will compile the Mac and Windows versions of <em>pgo</em>.</p>

<h3 id="deploy">Deploy</h3>

<p>Now that you have built the Operator images, you can push them to your Kubernetes cluster if that cluster is remote to your development host.</p>

<p>You would then run:</p>

<pre><code>make deployoperator
</code></pre>

<p>To deploy the Operator on your Kubernetes cluster.  If your Kubernetes cluster is not local to your development host, you will need to specify a Kube config file that will connect you to your Kubernetes cluster, see the Kube docs for details.</p>

<h3 id="debug">Debug</h3>

<p>Debug level logging in turned on by default when deploying the Operator.</p>

<p>You can view the REST API logs with the following alias:</p>

<pre><code>alias alog='kubectl logs `kubectl get pod --selector=name=postgres-operator -o jsonpath=&quot;{.items[0].metadata.name}&quot;` -c apiserver'
</code></pre>

<p>You can view the Operator core logic logs with the following alias:</p>

<pre><code>alias olog='kubectl logs `kubectl get pod --selector=name=postgres-operator -o jsonpath=&quot;{.items[0].metadata.name}&quot;` -c operator'
</code></pre>

<p>You can enable the <em>pgo</em> CLI debugging with the following flag:</p>

<pre><code>pgo version --debug
</code></pre>

<p>You can set the REST API URL as follows after a deployment if you are
developing on your local host:</p>

<pre><code>alias setip='export CO_APISERVER_URL=https://`kubectl get service postgres-operator -o=jsonpath=&quot;{.spec.clusterIP}&quot;`:8443'
</code></pre>


    
    
        <div class="chevrons">
    <div id="navigation">
<a class="nav nav-prev" href="https://crunchydata.github.io/postgres-operator/latest/developer-setup/" title="Developer Setup"> <i class="fa fa-chevron-left"></i><label>Developer Setup</label></a>
    <a class="nav nav-next" href="https://crunchydata.github.io/postgres-operator/latest/security/" title="Security" style="margin-right: 0px;"><label>Security</label><i class="fa fa-chevron-right"></i></a></div>
  </div>

  </section>
</article>

<footer>

<div class="footline">
    

    

  

  </div>


	<div>


  



	</div>
</footer>

<link href="https://crunchydata.github.io/postgres-operator/latest/css/featherlight.min.css" rel="stylesheet">
<script src="https://crunchydata.github.io/postgres-operator/latest/js/featherlight.min.js"></script>



<script src="https://crunchydata.github.io/postgres-operator/latest/theme-flex/script.js"></script>


    

    
    

    
  </body>
</html>