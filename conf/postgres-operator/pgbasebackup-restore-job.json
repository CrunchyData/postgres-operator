{
    "apiVersion":"batch/v1",
    "kind":"Job",
    "metadata":{
        "name":"{{.JobName}}",
        "labels":{
            "vendor":"crunchydata",
            "pgo-pgbasebackup-restore":"true",
            "pgbasebackup-restore-to-pvc": "{{.ToClusterPVCName}}",
            "pg-cluster":"{{.ClusterName}}",
            "pg-task": "{{.TaskName}}",
            "workflowid":"{{.WorkflowID}}"
        }
    },
    "spec":{
        "backoffLimit":0,
        "template":{
            "metadata":{
                "name":"{{.JobName}}",
                "labels":{
                    "vendor":"crunchydata",
                    "pgo-pgbasebackup-restore":"true",
                    "pg-cluster":"{{.ClusterName}}",
                    "pg-task": "{{.TaskName}}"
                }
            },
            "spec":{
                {{.SecurityContext}}
                "serviceAccountName": "pgo-default",
                "containers":[
                    {
                        "name":"pgbasebackup-restore",
                        "image":"{{.CCPImagePrefix}}/crunchy-pgbasebackup-restore:{{.CCPImageTag}}",
                        "env":[
                            {
                                "name":"BACKUP_PATH",
                                "value":"{{.BackupPath}}"
                            },
                            {
                                "name":"PGDATA_PATH",
                                "value":"{{.PgdataPath}}"
                            }
                        ],
                        "volumeMounts":[
                            {
                                "mountPath":"/pgdata",
                                "name":"pgdata"
                            },
                            {
                                "mountPath":"/backup",
                                "name":"backup"
                            }
                        ]
                    }
                ],
                "volumes":[
                    {
                        "name":"pgdata",
                        "persistentVolumeClaim":{
                            "claimName":"{{.ToClusterPVCName}}"
                        }
                    },
                    {
                        "name":"backup",
                        "persistentVolumeClaim":{
                            "claimName":"{{.BackupPVCName}}"
                        }
                    }
                ],
        {{.NodeSelector}}
                "restartPolicy":"Never"
            }
        }
    }
}
